# cmdk æ¶æ„å›¾

## ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            App.tsx                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    CommandPalette                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                  CommandMenu                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  ğŸ” Input (æœç´¢æ¡†)                                â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  ğŸ“‹ CommandList (ç»“æœåˆ—è¡¨)                        â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚    â”‚  ğŸ’¬ Message Search Results              â”‚    â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚    â”‚    - CommandItem                        â”‚    â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚    â”‚    - CommandItem                        â”‚    â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚    â”‚  ğŸ“ Project Search Results              â”‚    â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚    â”‚    - CommandItem                        â”‚    â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚    â”‚  ğŸ“„ Session Search Results              â”‚    â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚    â”‚    - CommandItem                        â”‚    â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Hooks Layer                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ useCommandMenu   â”‚  â”‚ useSearchPlugins â”‚  â”‚ useSearchCache   â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚
â”‚  â”‚ - isOpen         â”‚  â”‚ - registry       â”‚  â”‚ - get()          â”‚  â”‚
â”‚  â”‚ - query          â”‚  â”‚ - search()       â”‚  â”‚ - set()          â”‚  â”‚
â”‚  â”‚ - results        â”‚  â”‚ - isSearching    â”‚  â”‚ - clear()        â”‚  â”‚
â”‚  â”‚ - open()         â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚
â”‚  â”‚ - close()        â”‚  â”‚                  â”‚  â”‚ LRU Cache:       â”‚  â”‚
â”‚  â”‚ - setQuery()     â”‚  â”‚                  â”‚  â”‚ - 100 entries    â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚ - 5 min TTL      â”‚  â”‚
â”‚  â”‚ é˜²æŠ–: 300ms      â”‚  â”‚ å¹¶è¡Œæœç´¢         â”‚  â”‚                  â”‚  â”‚
â”‚  â”‚ å–æ¶ˆè¯·æ±‚         â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Plugin System Layer                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     PluginRegistry                             â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  - register(plugin)                                            â”‚  â”‚
â”‚  â”‚  - unregister(pluginId)                                        â”‚  â”‚
â”‚  â”‚  - get(pluginId)                                               â”‚  â”‚
â”‚  â”‚  - getAll()                                                    â”‚  â”‚
â”‚  â”‚  - search(query, context) â†’ Promise<SearchPluginResult[]>     â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  å¹¶è¡Œæ‰§è¡Œæ‰€æœ‰æ’ä»¶æœç´¢ â†’ åˆå¹¶ç»“æœ â†’ æŒ‰åˆ†æ•°æ’åº                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Plugin Implementations                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ’¬ Message       â”‚  â”‚ ğŸ“ Project       â”‚  â”‚ ğŸ“„ Session       â”‚  â”‚
â”‚  â”‚ SearchPlugin     â”‚  â”‚ SearchPlugin     â”‚  â”‚ SearchPlugin     â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚
â”‚  â”‚ Priority: 80     â”‚  â”‚ Priority: 70     â”‚  â”‚ Priority: 60     â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚
â”‚  â”‚ search():        â”‚  â”‚ search():        â”‚  â”‚ search():        â”‚  â”‚
â”‚  â”‚ - è°ƒç”¨ Tauri API â”‚  â”‚ - æå–é¡¹ç›®åˆ—è¡¨   â”‚  â”‚ - æœç´¢ä¼šè¯åç§°   â”‚  â”‚
â”‚  â”‚ - æœç´¢æ¶ˆæ¯å†…å®¹   â”‚  â”‚ - æ¨¡ç³ŠåŒ¹é…       â”‚  â”‚ - æœç´¢è·¯å¾„       â”‚  â”‚
â”‚  â”‚ - æ ¼å¼åŒ–ç»“æœ     â”‚  â”‚ - æ˜¾ç¤ºä¼šè¯æ•°     â”‚  â”‚ - æ˜¾ç¤ºå…ƒæ•°æ®     â”‚  â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚
â”‚  â”‚ onSelect():      â”‚  â”‚ onSelect():      â”‚  â”‚ onSelect():      â”‚  â”‚
â”‚  â”‚ - æ‰“å¼€ä¼šè¯       â”‚  â”‚ - åˆ‡æ¢é¡¹ç›®è§†å›¾   â”‚  â”‚ - æ‰“å¼€ä¼šè¯       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  BaseSearchPlugin                             â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  - fuzzyMatch(query, text) â†’ score                           â”‚  â”‚
â”‚  â”‚  - calculateHighlights(query, text) â†’ HighlightRange[]       â”‚  â”‚
â”‚  â”‚  - isEnabled(context) â†’ boolean                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•°æ®æµå›¾

```
ç”¨æˆ·æŒ‰ä¸‹ Cmd+K
    â†“
CommandPalette.open()
    â†“
useCommandMenu.open()
    â†“
æ˜¾ç¤ºå‘½ä»¤é¢æ¿
    â†“
ç”¨æˆ·è¾“å…¥æŸ¥è¯¢ "auth"
    â†“
useCommandMenu.setQuery("auth")
    â†“
é˜²æŠ– 300ms
    â†“
useSearchPlugins.search("auth")
    â†“
æ£€æŸ¥ç¼“å­˜
    â”œâ”€ å‘½ä¸­ â†’ è¿”å›ç¼“å­˜ç»“æœ
    â””â”€ æœªå‘½ä¸­ â†“
         PluginRegistry.search("auth", context)
              â†“
         Promise.all([
           MessageSearchPlugin.search("auth", context),
           ProjectSearchPlugin.search("auth", context),
           SessionSearchPlugin.search("auth", context)
         ])
              â†“
         [
           { id: "msg-1", title: "auth implementation", score: 0.9, pluginId: "message-search" },
           { id: "proj-1", title: "/auth-service", score: 0.8, pluginId: "project-search" },
           { id: "sess-1", title: "auth session", score: 0.7, pluginId: "session-search" }
         ]
              â†“
         åˆå¹¶ç»“æœ + æ’åºï¼ˆæŒ‰ score Ã— priorityï¼‰
              â†“
         ç¼“å­˜ç»“æœï¼ˆkey: "message-search:auth", "project-search:auth", ...ï¼‰
              â†“
         è¿”å›ç»“æœ
    â†“
useCommandMenu.setResults(results)
    â†“
CommandMenu æ¸²æŸ“ç»“æœ
    â”œâ”€ æŒ‰æ’ä»¶åˆ†ç»„
    â”œâ”€ é«˜äº®åŒ¹é…æ–‡æœ¬
    â””â”€ è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¦‚æœ > 50 æ¡ï¼‰
    â†“
ç”¨æˆ·é€‰æ‹©ç»“æœï¼ˆæŒ‰ Enterï¼‰
    â†“
plugin.onSelect(result, context)
    â”œâ”€ MessageSearchPlugin â†’ æ‰“å¼€ä¼šè¯
    â”œâ”€ ProjectSearchPlugin â†’ åˆ‡æ¢é¡¹ç›®è§†å›¾
    â””â”€ SessionSearchPlugin â†’ æ‰“å¼€ä¼šè¯
    â†“
CommandPalette.close()
```

## æ’ä»¶ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SearchPlugin Interface                  â”‚
â”‚                                                              â”‚
â”‚  interface SearchPlugin {                                    â”‚
â”‚    // å…ƒæ•°æ®                                                 â”‚
â”‚    id: string                                                â”‚
â”‚    name: string                                              â”‚
â”‚    icon: React.ComponentType                                 â”‚
â”‚    description: string                                       â”‚
â”‚    keywords: string[]                                        â”‚
â”‚    priority: number                                          â”‚
â”‚                                                              â”‚
â”‚    // æ ¸å¿ƒæ–¹æ³•                                               â”‚
â”‚    search(query, context): Promise<SearchPluginResult[]>    â”‚
â”‚    onSelect(result, context): void                           â”‚
â”‚                                                              â”‚
â”‚    // å¯é€‰æ–¹æ³•                                               â”‚
â”‚    renderItem?(result): React.ReactNode                      â”‚
â”‚    isEnabled?(context): boolean                              â”‚
â”‚    onMount?(): void                                          â”‚
â”‚    onUnmount?(): void                                        â”‚
â”‚  }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ implements
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BaseSearchPlugin                          â”‚
â”‚                                                              â”‚
â”‚  abstract class BaseSearchPlugin implements SearchPlugin {  â”‚
â”‚    // æŠ½è±¡å±æ€§ï¼ˆå­ç±»å¿…é¡»å®ç°ï¼‰                                â”‚
â”‚    abstract id: string                                       â”‚
â”‚    abstract name: string                                     â”‚
â”‚    abstract icon: React.ComponentType                        â”‚
â”‚                                                              â”‚
â”‚    // é»˜è®¤å®ç°                                               â”‚
â”‚    priority: number = 50                                     â”‚
â”‚                                                              â”‚
â”‚    // å·¥å…·æ–¹æ³•                                               â”‚
â”‚    protected fuzzyMatch(query, text): number                 â”‚
â”‚    protected calculateHighlights(query, text): Range[]       â”‚
â”‚                                                              â”‚
â”‚    // é»˜è®¤å®ç°ï¼ˆå¯è¦†ç›–ï¼‰                                      â”‚
â”‚    onSelect(result, context): void                           â”‚
â”‚    isEnabled(context): boolean                               â”‚
â”‚  }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ extends
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MessageSearch    â”‚  â”‚ ProjectSearch    â”‚  â”‚ SessionSearch    â”‚
â”‚ Plugin           â”‚  â”‚ Plugin           â”‚  â”‚ Plugin           â”‚
â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
â”‚ id: "message-    â”‚  â”‚ id: "project-    â”‚  â”‚ id: "session-    â”‚
â”‚      search"     â”‚  â”‚      search"     â”‚  â”‚      search"     â”‚
â”‚ priority: 80     â”‚  â”‚ priority: 70     â”‚  â”‚ priority: 60     â”‚
â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
â”‚ search():        â”‚  â”‚ search():        â”‚  â”‚ search():        â”‚
â”‚ - Tauri API      â”‚  â”‚ - æå–é¡¹ç›®       â”‚  â”‚ - æœç´¢ä¼šè¯       â”‚
â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
â”‚ onSelect():      â”‚  â”‚ onSelect():      â”‚  â”‚ onSelect():      â”‚
â”‚ - æ‰“å¼€ä¼šè¯       â”‚  â”‚ - åˆ‡æ¢é¡¹ç›®       â”‚  â”‚ - æ‰“å¼€ä¼šè¯       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ€§èƒ½ä¼˜åŒ–æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Performance Layer                       â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   é˜²æŠ–æœç´¢      â”‚  â”‚   è™šæ‹Ÿæ»šåŠ¨      â”‚  â”‚   LRU ç¼“å­˜     â”‚â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚â”‚
â”‚  â”‚ å»¶è¿Ÿ: 300ms    â”‚  â”‚ é˜ˆå€¼: 50 æ¡    â”‚  â”‚ å¤§å°: 100 æ¡   â”‚â”‚
â”‚  â”‚ å–æ¶ˆæœªå®Œæˆè¯·æ±‚  â”‚  â”‚ é¡¹é«˜åº¦: 60px   â”‚  â”‚ TTL: 5 åˆ†é’Ÿ    â”‚â”‚
â”‚  â”‚                â”‚  â”‚ å¸§ç‡: 60fps    â”‚  â”‚                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   å¹¶è¡Œæœç´¢      â”‚  â”‚   æ‡’åŠ è½½æ’ä»¶    â”‚  â”‚   React.memo   â”‚â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚â”‚
â”‚  â”‚ Promise.all()  â”‚  â”‚ æŒ‰éœ€åŠ è½½       â”‚  â”‚ ä¼˜åŒ–é‡æ¸²æŸ“     â”‚â”‚
â”‚  â”‚ æ‰€æœ‰æ’ä»¶å¹¶è¡Œ    â”‚  â”‚ å‡å°‘åˆå§‹åŠ è½½    â”‚  â”‚                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ç»„ä»¶å±‚æ¬¡ç»“æ„

```
App
â””â”€â”€ CommandPalette
    â”œâ”€â”€ èƒŒæ™¯é®ç½© (onClick â†’ close)
    â””â”€â”€ é¢æ¿å®¹å™¨ (max-w-2xl, max-h-60vh)
        â””â”€â”€ CommandMenu
            â”œâ”€â”€ æœç´¢æ¡†åŒºåŸŸ
            â”‚   â”œâ”€â”€ Search Icon
            â”‚   â”œâ”€â”€ Input (cmdk)
            â”‚   â”œâ”€â”€ Loading Spinner (æ¡ä»¶æ¸²æŸ“)
            â”‚   â””â”€â”€ ESC æç¤º
            â”‚
            â””â”€â”€ ç»“æœåˆ—è¡¨åŒºåŸŸ (cmdk-list)
                â”œâ”€â”€ CommandLoading (isSearching)
                â”œâ”€â”€ CommandEmpty (æ— ç»“æœ)
                â””â”€â”€ CommandGroup[] (æŒ‰æ’ä»¶åˆ†ç»„)
                    â”œâ”€â”€ Group Heading (æ’ä»¶åç§°)
                    â””â”€â”€ CommandItem[]
                        â”œâ”€â”€ Icon
                        â”œâ”€â”€ Content
                        â”‚   â”œâ”€â”€ Title (é«˜äº®)
                        â”‚   â”œâ”€â”€ Subtitle (é«˜äº®)
                        â”‚   â””â”€â”€ Description (é«˜äº®)
                        â””â”€â”€ Score (å¼€å‘æ¨¡å¼)
```

## çŠ¶æ€ç®¡ç†æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    useCommandMenu Store                      â”‚
â”‚                                                              â”‚
â”‚  State:                                                      â”‚
â”‚  â”œâ”€â”€ isOpen: boolean                                         â”‚
â”‚  â”œâ”€â”€ query: string                                           â”‚
â”‚  â”œâ”€â”€ results: SearchPluginResult[]                           â”‚
â”‚  â”œâ”€â”€ isSearching: boolean                                    â”‚
â”‚  â””â”€â”€ selectedIndex: number                                   â”‚
â”‚                                                              â”‚
â”‚  Actions:                                                    â”‚
â”‚  â”œâ”€â”€ open()                                                  â”‚
â”‚  â”œâ”€â”€ close()                                                 â”‚
â”‚  â”œâ”€â”€ toggle()                                                â”‚
â”‚  â”œâ”€â”€ setQuery(query)                                         â”‚
â”‚  â”œâ”€â”€ setResults(results)                                     â”‚
â”‚  â”œâ”€â”€ setIsSearching(isSearching)                             â”‚
â”‚  â”œâ”€â”€ setSelectedIndex(index)                                 â”‚
â”‚  â””â”€â”€ reset()                                                 â”‚
â”‚                                                              â”‚
â”‚  Side Effects:                                               â”‚
â”‚  â”œâ”€â”€ ç›‘å¬ query å˜åŒ– â†’ é˜²æŠ–æœç´¢                               â”‚
â”‚  â”œâ”€â”€ ç›‘å¬ isOpen å˜åŒ– â†’ æ¸…ç†çŠ¶æ€                              â”‚
â”‚  â””â”€â”€ å–æ¶ˆæœªå®Œæˆçš„æœç´¢è¯·æ±‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ç¼“å­˜æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      LRU Cache                               â”‚
â”‚                                                              â”‚
â”‚  Map<string, CacheEntry>                                     â”‚
â”‚  â”œâ”€â”€ "message-search:auth" â†’ { results: [...], ts: ... }    â”‚
â”‚  â”œâ”€â”€ "project-search:auth" â†’ { results: [...], ts: ... }    â”‚
â”‚  â”œâ”€â”€ "session-search:auth" â†’ { results: [...], ts: ... }    â”‚
â”‚  â””â”€â”€ ...                                                     â”‚
â”‚                                                              â”‚
â”‚  é…ç½®:                                                        â”‚
â”‚  â”œâ”€â”€ æœ€å¤§æ¡ç›®: 100                                            â”‚
â”‚  â”œâ”€â”€ TTL: 5 åˆ†é’Ÿ                                              â”‚
â”‚  â””â”€â”€ æ·˜æ±°ç­–ç•¥: LRU (Least Recently Used)                      â”‚
â”‚                                                              â”‚
â”‚  æ“ä½œ:                                                        â”‚
â”‚  â”œâ”€â”€ get(query) â†’ results | null                             â”‚
â”‚  â”‚   â”œâ”€â”€ æ£€æŸ¥æ˜¯å¦å­˜åœ¨                                         â”‚
â”‚  â”‚   â”œâ”€â”€ æ£€æŸ¥æ˜¯å¦è¿‡æœŸ                                         â”‚
â”‚  â”‚   â””â”€â”€ è¿”å›ç»“æœæˆ– null                                      â”‚
â”‚  â”‚                                                            â”‚
â”‚  â”œâ”€â”€ set(query, results)                                     â”‚
â”‚  â”‚   â”œâ”€â”€ æ£€æŸ¥ç¼“å­˜æ˜¯å¦æ»¡                                       â”‚
â”‚  â”‚   â”œâ”€â”€ å¦‚æœæ»¡ï¼Œåˆ é™¤æœ€æ—§çš„æ¡ç›®                                â”‚
â”‚  â”‚   â””â”€â”€ æ·»åŠ æ–°æ¡ç›®                                           â”‚
â”‚  â”‚                                                            â”‚
â”‚  â””â”€â”€ clear()                                                 â”‚
â”‚      â””â”€â”€ æ¸…ç©ºæ‰€æœ‰ç¼“å­˜                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

*æ¶æ„å›¾ç”Ÿæˆæ—¥æœŸ: 2026-01-31*
