{"taskSetName": "light-theme", "projectName": "Pi Session Manager - 日间模式实现", "outputDir": "./task", "goals": [{"metric": "主题支持", "before": "仅深色模式", "target": "深色/浅色/跟随系统", "improvement": "完整主题系统"}, {"metric": "用户体验", "before": "固定深色界面", "target": "用户可自定义主题", "improvement": "个性化体验"}], "tasks": [{"id": "001", "title": "激活 SettingsProvider", "priority": "High", "estimated": "15m", "description": "在 main.tsx 中添加 SettingsProvider 包裹，激活主题管理功能", "steps": ["修改 src/main.tsx，导入 SettingsProvider", "用 SettingsProvider 包裹 App 组件", "验证 SettingsContext 是否正常工作", "测试设置存储到 localStorage"], "dependencies": [], "acceptance": ["SettingsProvider 已添加到 main.tsx", "App 组件被正确包裹", "设置可以正常保存和加载"]}, {"id": "002", "title": "配置 Tailwind Light 主题颜色", "priority": "High", "estimated": "20m", "description": "在 tailwind.config.js 中定义 light 主题的完整颜色系统", "steps": ["分析当前 dark 主题颜色方案", "设计 light 主题互补配色（深色文字、浅色背景）", "在 tailwind.config.js 的 colors.extend 中添加 light 主题颜色", "确保所有颜色变量都有 light 版本", "验证颜色对比度符合 WCAG AA 标准"], "dependencies": ["001"], "acceptance": ["tailwind.config.js 包含完整的 light 主题颜色", "所有 dark 主题颜色都有对应的 light 版本", "颜色对比度符合 WCAG 标准"]}, {"id": "003", "title": "添加 Light 主题 CSS 样式", "priority": "High", "estimated": "15m", "description": "在 index.css 中添加 .theme-light 样式规则，支持主题切换", "steps": ["修改 src/index.css，添加 .theme-light 选择器", "定义 light 主题的 body 背景和文字颜色", "添加主题切换的 transition 动画", "确保默认样式（深色）不受影响", "测试 CSS 变量的作用范围"], "dependencies": ["001"], "acceptance": [".theme-light 样式已添加到 index.css", "主题切换有平滑的过渡动画", "默认深色样式正常工作"]}, {"id": "004", "title": "在 App.tsx 中激活主题应用", "priority": "High", "estimated": "10m", "description": "在 App 组件中调用 useAppearance()，使主题设置生效", "steps": ["修改 src/App.tsx，导入 useAppearance hook", "在 App 组件中调用 useAppearance()", "验证 theme-dark 和 theme-light 类名正确添加", "测试主题切换是否触发重新渲染"], "dependencies": ["002", "003"], "acceptance": ["useAppearance() 已在 App.tsx 中调用", "切换主题时 DOM 类名正确变化", "界面颜色随主题切换而变化"]}, {"id": "005", "title": "迁移核心组件使用语义化颜色", "priority": "High", "estimated": "60m", "description": "将核心组件中的硬编码颜色替换为 Tailwind 语义化颜色，使其响应主题切换", "steps": ["搜索项目中所有硬编码的颜色值（如 #1a1b26, #2c2d3b）", "替换 App.tsx 中的硬编码颜色为 bg-background, text-foreground 等", "替换 SessionList.tsx 中的硬编码颜色", "替换 SessionViewer.tsx 中的硬编码颜色", "替换 SearchPanel.tsx 中的硬编码颜色", "替换 SettingsPanel.tsx 中的硬编码颜色", "替换 ProjectList.tsx 中的硬编码颜色", "替换 Dashboard.tsx 中的硬编码颜色"], "dependencies": ["004"], "acceptance": ["所有核心组件不再使用硬编码颜色", "组件使用 bg-background, text-foreground 等语义化类名", "组件在 light 和 dark 主题下都正常显示"]}, {"id": "006", "title": "迁移样式文件适配 Light 主题", "priority": "Medium", "estimated": "30m", "description": "更新 src/styles/ 下的 CSS 文件，使其支持 light 主题", "steps": ["修改 src/styles/sidebar.css，添加 light 主题样式", "修改 src/styles/command.css，添加 light 主题样式", "修改 src/styles/search.css，添加 light 主题样式", "修改 src/styles/viewer.css，添加 light 主题样式", "修改 src/styles/session.css，添加 light 主题样式", "修改 src/styles/diff.css，添加 light 主题样式"], "dependencies": ["004"], "acceptance": ["所有样式文件支持 light 主题", "样式使用 CSS 变量或主题选择器", "组件样式在两种主题下都正常显示"]}, {"id": "007", "title": "实现系统主题自动检测", "priority": "Medium", "estimated": "20m", "description": "在 useAppearance hook 中添加系统主题检测功能，支持'跟随系统'模式", "steps": ["在 useAppearance 中添加 window.matchMedia 监听", "实现 prefers-color-scheme 变化时的自动切换", "添加事件监听器的清理逻辑", "测试系统主题切换时应用响应", "验证 theme='system' 模式工作正常"], "dependencies": ["004"], "acceptance": ["系统主题变化时应用自动切换", "theme='system' 模式正常工作", "事件监听器正确清理，无内存泄漏"]}, {"id": "008", "title": "全面测试与优化", "priority": "High", "estimated": "30m", "description": "测试所有功能在两种主题下的表现，优化颜色和交互体验", "steps": ["测试深色/浅色/跟随系统三种模式切换", "检查所有组件在 light 主题下的显示效果", "验证颜色对比度和可读性", "测试主题切换动画是否流畅", "检查边框、阴影、悬停状态等细节", "修复发现的显示问题", "优化主题切换性能"], "dependencies": ["005", "006", "007"], "acceptance": ["三种主题模式都正常工作", "所有组件在两种主题下显示正常", "颜色对比度符合 WCAG 标准", "主题切换动画流畅无卡顿", "无明显视觉缺陷"]}]}